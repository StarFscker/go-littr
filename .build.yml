image: archlinux
packages:
  - go
  - postgresql
sources:
  - https://github.com/mariusor/littr.go
tasks:
  - build: |
      cd littr.go
      export GO111MODULE=on
      cp .env.example .env
      make all
  - postgres: |
      su - postgres -c "initdb --locale en_US.UTF-8 -E UTF8 -D /var/lib/postgres/data"
      systemctl start postgresql.service
  - tests: |
      cd littr.go
      export GO111MODULE=on
      make tests
